<div class="spinner-wrapper" *ngIf="displayLoader" aria-live='polite' role="alert" aria-label="Results Loading"><i
    class="fas fa-spinner fa-pulse fa-3x" aria-hidden="true"></i></div>

<div class="container">
  <h1 id="main" tabindex="-1">Search files</h1>
  <p class="light">Complete the parameters to create a search query.</p>

  <div #ukhoTarget>

    <ukho-dialogue [type]='messageType' *ngIf="displayMessage" aria-live="polite" tabindex="-1">
      <h3>{{messageTitle}}</h3>
      <div>{{messageDesc}}</div>
      <div *ngIf="loginErrorDisplay">
        Please
        <button class="loginAction" (click)="refreshToken()">click here</button> to sign-in
      </div>
    </ukho-dialogue>
  </div>

  <app-fss-simplified-search *ngIf="activeSearchType === SearchTypeEnum.SimplifiedSearch"
    (ShowAdvancedSearchClicked)="ShowAdvancedSearchClicked()"
    (onSimplifiedSearchClicked)="onSimplifiedSearchClicked($event)"></app-fss-simplified-search>

  <app-fss-advanced-search *ngIf="activeSearchType === SearchTypeEnum.AdvancedSearch"
    (ShowSimplifiedSearchClicked)="ShowSimplifiedSearchClicked()"
    (onAdvancedSearchClicked)="onAdvancedSearchClicked($event)"
    [observablePopularSearch]="eventPopularSearch.asObservable()"
    [observableAdvancedSearchTokenRefresh]="eventAdvancedSearchTokenRefresh.asObservable()"></app-fss-advanced-search>

  <div *ngIf="displaySearchResult">
    <a class="skip-to-content-link skipResults section" *ngIf="activeSearchType === SearchTypeEnum.SimplifiedSearch" [routerLink]="[currentUrl]" [fragment]="'skipResultsLink'" >Skip to Search Results </a>
    <div [ngClass]="activeSearchType === SearchTypeEnum.SimplifiedSearch ? 'SimplifiedSearch' : ''">
      
      <app-fss-simplified-filter id="gotoFilterMenu" *ngIf="activeSearchType === SearchTypeEnum.SimplifiedSearch" tabindex="-1"
      (onApplyFilterButtonClicked)="onApplyFilterButtonClicked($event)" [filterGroups]="filterGroups"></app-fss-simplified-filter>
      <div >
        <h2>
          <span class="totalResultLabel" *ngIf="searchResultTotal == 1" role="alert">{{this.searchResultTotal}} result found</span>
          <span class="totalResultLabel" *ngIf="searchResultTotal > 1" role="alert">{{this.searchResultTotal}} results found</span>
          <span #showSearchResult *ngIf="searchResultTotal > pageRecordCount" class="paginatorLabel" role="alert"> {{this.paginatorLabel}}</span>
        </h2>
        <app-fss-search-results class="SimplifiedSearchResult" id="skipResultsLink" tabindex="-1" [searchResult]="searchResult"
          (handleTokenExpiry)="handleTokenExpiry()"></app-fss-search-results>
      </div>
    </div>
    <br />
    <div class="pagination">
      <ukho-paginator [label]="paginatorLabel" [pages]="pages" [currentPage]="currentPage"
        (pageChange)="pageChange($event)">
      </ukho-paginator>

      <a class="skip-to-content-link SkipToFilter section" *ngIf="activeSearchType === SearchTypeEnum.SimplifiedSearch" [routerLink]="[currentUrl]" [fragment]="'gotoFilterMenu'" >Go to Filter </a>
    </div>  

  <br *ngIf="activeSearchType === SearchTypeEnum.AdvancedSearch && displayPopularSearch" />
  <ukho-hr aria-hidden="true" *ngIf="activeSearchType === SearchTypeEnum.AdvancedSearch && displayPopularSearch">
  </ukho-hr>
  <app-fss-popular-search-batches *ngIf="activeSearchType === SearchTypeEnum.AdvancedSearch && displayPopularSearch"
    (popularSearchClicked)="popularSearchClicked($event)"></app-fss-popular-search-batches>
</div>