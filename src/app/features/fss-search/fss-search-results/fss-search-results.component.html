<div class="result-margin" *ngFor="let batch of searchResultVM">
  <ukho-card>
    <table class="attribute-table">
      <caption class="sr-only">Attributes for Batch ID {{batch.BatchID.value}} </caption>
      <tr>
        <th *ngFor="let attribute of batch.batchAttributes">{{attribute.key}}</th>
      </tr>
      <tr>
        <td *ngFor="let attribute of batch.batchAttributes">{{attribute.value}}</td>
      </tr>
    </table>

    <ukho-expansion class="expansionLabel" heading="Choose files to download" [alignHeadingRight]=true [initialExpanded]=false>
      <table class="system-attribute-table">
        <caption class="sr-only">Details for Batch ID {{batch.BatchID.value}} </caption>
        <tr>
          <th>{{batch.BatchID.key}}</th>
          <th>{{batch.BatchPublishedDate.key}}</th>
          <th>{{batch.ExpiryDate.key}}</th>
        </tr>
        <tr>
          <td>{{batch.BatchID.value| uppercase}}</td>
          <td>{{batch.BatchPublishedDate.value| date:'dd/MM/yyyy HH:mm'}}</td>
          <td>{{batch.ExpiryDate.value| date:'dd/MM/yyyy HH:mm'}}</td>
        </tr>
      </table>
      
      <table ukho-table [dataSource]="batch.batchFileDetails.rowData">
        <caption class="sr-only">Dowload files for Batch ID {{batch.BatchID.value}}</caption>
        <ng-container ukhoColumnDef="FileName">
          <th ukho-header-cell *ukhoHeaderCellDef>FileName </th>
          <td ukho-cell *ukhoCellDef="let element">{{element.FileName}}</td>
        </ng-container>
        <ng-container ukhoColumnDef="MimeType">
          <th ukho-header-cell *ukhoHeaderCellDef>MimeType </th>
          <td ukho-cell *ukhoCellDef="let element">{{element.MimeType}}</td>
        </ng-container>
        <ng-container ukhoColumnDef="FileSize">
          <th ukho-header-cell *ukhoHeaderCellDef>FileSize </th>
          <td ukho-cell *ukhoCellDef="let element">{{element.FileSize}}</td>
        </ng-container>
        <ng-container ukhoColumnDef="Download">
          <th ukho-header-cell *ukhoHeaderCellDef>Download</th>
          <td ukho-cell *ukhoCellDef="let element"><div class="fileDownload" [attr.rel]="element.Download" tabindex="0" role="button" attr.aria-label="Download File for {{element.FileName}}"><i class="fa fa-download fa-1x"></i></div></td>
        </ng-container>
        <tr ukho-header-row *ukhoHeaderRowDef="batch.batchFileDetails.columnData"></tr>
        <tr ukho-row *ukhoRowDef="let row; columns: batch.batchFileDetails.columnData"></tr>
      </table>
    </ukho-expansion>
  </ukho-card>
</div>